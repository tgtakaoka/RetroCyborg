# Clock Generator for HD6309E
 - Can provide about 1MHz E/Q clock.
 - Support step clock cycle.
 - Detect I/O address access and stretch clock.

## IO Address READ access
```
           ___v    ___V           Q___v    _
CLK_Q ____|   |___|   |_________a_|   |___|  CLK_Q
      __e    ___e    _____A_e        ___e
CLK_E   |___|   |___|       |_i_a___|   |___ CLK_E
      __________________I     i_____________
 #INT                   |_____|              #INT
      ____________________A     a___________
 #ACK                     |___i_|            #ACK
      _   _____   _________   _________   __
 ADDR _>e<____v>e<____V_I__>e<________v>e<__ ADDR
      _   _____  _______I___  _________   __
 R/#W _>e<_____>e           e<_________>e<__ R/#W
                          ______
 DBUS -------------------|A_e_i_a-Q--------- DBUS
```

## IO Address WRITE access
```
           ___v   Q___V           Q___v    _
CLK_Q ____|   |___|   |_________a_|   |___|  CLK_Q
      __e    ___e    _____A_e        ___e
CLK_E   |___|   |___|       |_i_a___|   |___ CLK_E
      __________________I     i_____________
 #INT                   |_____|              #INT
      ____________________A     a___________
 #ACK                     |___i_|            #ACK
      _   _____   _________   _________   __
 ADDR _>e<____v>e<____V_I__>e<________v>e<__ ADDR
      _   _____               _________   __
 R/#W _>e<_____>e_______I___e<_________>e<__ R/#W
                    ________
 DBUS ------------Q<______A_e-i-a-Q--------- DBUS
```

## Halt, 6809 emulation mode
```
        ___h    ____sH        ____sH       ___H    ___
CLK_Q _|   |___|     |iA___a_|     |iA__a_|   |___|    CLK_Q
         s___    S____iAe      S____iAe     s___    s_
CLK_E ___|   |___|      |__a___|      |_a___|   |___|  CLK_E
      _______       s_____        s_________s_______s_
#STEP       ||___S__|    ||a___S__|                    #STEP
      ____________I   i_________I   i_________________
 #INT             |___|         |___|                  #INT
      _________________A   a_________A   a____________
 #ACK                  |___|         |___|             #ACK
      _____________
#HALT              |sH_____________H__________H_______ #HALT
                                      e__a____________
   BA _____________________a__________|                BA
                                      e__a____________
   BS _____________________a__________|                BS
```

## Halt, 6309 native mode

## Reset, 6809 emulation mode

## Reset, 6309 native mode

## Unhalt, 6809 emulation mode
```
         ___H    ____sh        ___sH      Q___sH      Q___
CLK_Q __|   |___|     |iA___a_|    |iA__a_|    |iA__a_|    CLK_Q
          s___    S____iAe      S___iAe     S___iAe     S_
CLK_E ____|   |___|      |__a___|     |_a___|     |_a___|  CLK_E
      ____s______    s_____       s____       s____
#STEP           ||S__|    ||a___S_|   ||a___S_|   ||a___S_ #STEP
      _____________I   i_________I  i________I  i________I
 #INT              |___|         |__|        |__|        | #INT
      __________________A   a________A  a________A  a_____
 #ACK                   |___|        |__|        |__|      #ACK
                     sh____
#HALT ______H_______||    ||a_____sH____a______H____a_____ #HALT
      ________________________________e
   BA                                 |_a___________a_____ BA
      ________________________________e
   BS                                 |_a___________a_____ BS
      __________________________________a___________a_Q
  LIC                                                 |___ LIC
                                          Q_________a_____
 AVMA __________________________________a_|                AVMA
```

## Unhalt, 6309 native mode
LIC signal keeps negated.
```
         ___H    ____sh        ___sH      Q___sH      Q___
CLK_Q __|   |___|     |iA___a_|    |iA__a_|    |iA__a_|    CLK_Q
          s___    S____iAe      S___iAe     S___iAe     S_
CLK_E ____|   |___|      |__a___|     |_a___|     |_a___|  CLK_E
      ____s______    s_____       s____       s____
#STEP           ||S__|    ||a___S_|   ||a___S_|   ||a___S_ #STEP
      _____________I   i_________I  i________I  i________I
 #INT              |___|         |__|        |__|        | #INT
      __________________A   a________A  a________A  a_____
 #ACK                   |___|        |__|        |__|      #ACK
                     sh____
#HALT ______H_______||    ||a_____sH____a______H____a_____ #HALT
      ________________________________e
   BA                                 |_a___________a_____ BA
      ________________________________e
   BS                                 |_a___________a_____ BS

  LIC __________________________________a___________a_____ LIC
                                          Q_________a_____
 AVMA __________________________________a_|                AVMA
```

## Last instruction cycle, 6809 emulation mode
```
      _       Q___sH      Q___H    _
CLK_Q  |____a_|    |iA__a_|   |___|  CLK_Q
      ___e      S___iAe     s___
CLK_E    |__a___|     |_a___|   |___ CLK_E
      _____       s_____a___s_______
#STEP     ||a___S_|                  #STEP
      ___________I  i_______________
 #INT            |__|                #INT
            a________A  a___________
 #ACK ______|        |__|            #ACK

#HALT ______a_____sH____a_____H_____ #HALT
                      e_a___________
   BA ______a_________|              BA
                      e_a___________
   BS ______a_________|              BS
              Q_________a_Q_________
  LIC ______a_|                      LIC
      ______a___________a_Q
 AVMA ______a___________a_|_________ AVMA
```

## Last instruction cycle, 6309 native mode
LIC nagates after MPU is halted.
```
      _       Q___sH      Q___H    _
CLK_Q  |____a_|    |iA__a_|   |___|  CLK_Q
      ___e      S___iAe     s___
CLK_E    |__a___|     |_a___|   |___ CLK_E
      _____       s_____a___s_______
#STEP     ||a___S_|                  #STEP
      ___________I  i_______________
 #INT            |__|                #INT
            a________A  a___________
 #ACK ______|        |__|            #ACK

#HALT ______a_____sH____a_____H_____ #HALT
                      e_a___________
   BA ______a_________|              BA
                      e_a___________
   BS ______a_________|              BS
              Q_________a_Q
  LIC ______a_|           |_________ LIC
      ______a___________a_Q
 AVMA ______a___________a_|_________ AVMA
```
